// scripts/generate-sitemap.js
// 동적 sitemap 생성 스크립트 (선택사항)

const fs = require('fs');
const path = require('path');

const generateSitemap = () => {
  const baseUrl = 'https://www.dongraelaw.shop';
  const currentDate = new Date().toISOString().split('T')[0];

  // 정적 페이지들
  const staticPages = [
    { url: '/', priority: '1.0', changefreq: 'weekly' },
    { url: '/info', priority: '0.8', changefreq: 'monthly' },
    { url: '/faq', priority: '0.9', changefreq: 'weekly' },
    { url: '/services', priority: '0.8', changefreq: 'monthly' },
    { url: '/services/civil', priority: '0.7', changefreq: 'monthly' },
    { url: '/services/criminal', priority: '0.7', changefreq: 'monthly' },
    { url: '/services/corporate', priority: '0.7', changefreq: 'monthly' },
    { url: '/services/family', priority: '0.7', changefreq: 'monthly' },
    { url: '/services/realestate', priority: '0.7', changefreq: 'monthly' },
    { url: '/consultation', priority: '0.8', changefreq: 'weekly' },
    { url: '/contact', priority: '0.6', changefreq: 'monthly' },
    { url: '/privacy-policy', priority: '0.3', changefreq: 'yearly' },
    { url: '/terms-of-service', priority: '0.3', changefreq: 'yearly' },
  ];

  // 동적 페이지들 (블로그 포스트 등)
  const dynamicPages = [];
  // 향후 블로그 포스트가 있다면 여기서 데이터베이스에서 가져와서 추가

  const allPages = [...staticPages, ...dynamicPages];

  const sitemap = `<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
${allPages.map(page => `  <url>
    <loc>${baseUrl}${page.url}</loc>
    <lastmod>${currentDate}</lastmod>
    <changefreq>${page.changefreq}</changefreq>
    <priority>${page.priority}</priority>
  </url>`).join('\n')}
</urlset>`;

  fs.writeFileSync(path.join(__dirname, '../public/sitemap.xml'), sitemap);
  console.log('✅ Sitemap generated successfully!');
};

// package.json scripts에 추가:
// "generate-sitemap": "node scripts/generate-sitemap.js"

module.exports = generateSitemap;